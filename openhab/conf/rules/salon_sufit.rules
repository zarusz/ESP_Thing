
rule "Sufit zasilacz - if off, all lights off"
when
	Item CLightPower received update OFF
then
	logInfo("Ceiling", "Turning all lights off")
	if (CLight1.state != OFF) sendCommand(CLight1, OFF)
	if (CLight2.state != OFF) sendCommand(CLight2, OFF)
	if (CLight3.state != OFF) sendCommand(CLight3, OFF)
	if (CLight4.state != OFF) sendCommand(CLight4, OFF)
end

rule "Sufit zasilacz - on if one light on"
when
	Item CLight1 received update ON or
	Item CLight2 received update ON or
	Item CLight3 received update ON or
	Item CLight4 received update ON
then
	logInfo("Ceiling", "Turning power on")
	if (CLightPower.state != ON) sendCommand(CLightPower, ON)
end

rule "Sufit zasilacz - off if all light off"
when
	Item CLight1 received update OFF or
	Item CLight2 received update OFF or
	Item CLight3 received update OFF or
	Item CLight4 received update OFF
then
	logInfo("Ceiling", "Turning power off")
	if (CLight1.state == OFF && CLight2.state == OFF && CLight3.state == OFF && CLight4.state == OFF) {
		if (CLightPower.state != OFF) sendCommand(CLightPower, OFF)
	}
end
